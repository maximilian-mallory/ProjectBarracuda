<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Long Name Game</title>
    <link rel="stylesheet" href="../static/css/GamePage.css">
    <script>

        var numGuesses = 0;
  
        function checkGuess() 
        {
          let currentLocation = "{{city_name}}";
  
          var guess = window.prompt("{{city_name}}");
          
          console.log(currentLocation);
  
          if( guess.toLowerCase() == currentLocation )
          {
            alert("Correct");
          }
          else
          {
            alert("Wrong");
          }
          numGuesses++;
          console.log(numGuesses);
        }
  
        function initialize ()
        {
          var latitude = parseFloat("{{lat_con}}");
          var longitude = parseFloat("{{long_con}}");
          const fenway = { lat: latitude, lng: longitude };
         
          const panorama = new google.maps.StreetViewPanorama(
            document.getElementById("pano"),
            {
              position: fenway,
              pov: {
                heading: 34,
                pitch: 10,
              },
            
  
              linksControl: true,
              panControl: false,
              enableCloseButton: false,
              addressControl: false,
              showRoadLabels: false,
            },
          );
  
          map.setStreetView(panorama);
        }
  
        window.initialize = initialize;
      </script>
</head>
<body>

<div id="container">
    <div id="title" class="main-title">
        <h1>Super Long Name Game</h1>
    </div>
</div>

<div id="container">
    <div class="side-box">
        <h2>Hints</h2>
        <ul>
            <li>Hint</li>
            <li>Hint</li>
            <li>Hint</li>
            <li>Hint</li>
            <li>Hint</li>
            <li>Hint</li>
            <li>Hint</li>
            <li>Hint</li>
        </ul>
    </div>
    <div id="pano"></div>
    <div class="side-box">
        <h2>Leaderboard</h2>
        <ul>
            <li>Player</li>
            <li>Player</li>
            <li>Player</li>
            <li>Player</li>
            <li>Player</li>
            <li>Player</li>
            <li>Player</li>
            <li>Player</li>
        </ul>
        <button onclick="initialize()">New Game (Reload Map)</button>
        <!-- I will be adding AJAX funcitonality to the above button to load a new game asynchronously-->
        
          <input
            type="button" 
            value="{{city_name}}"
            onclick="checkGuess();"
          />
       
        <!-- this is the button for guessing. I can look into getting a better popup window, or we can have a permanent textbox within the game page-->
    </div>
</div>

<div id="container">
    <div id="timerDiv" class="side-box bottom">
    </div>
    <div class="main-content bottom-content">
        <h2>Quotes to keep you going!</h2>
        <p>"You don't suck!</p>
        <p>"You're parents divorce wasn't your fault!</p>
    </div>
    <div class="side-box bottom">
        <p>Globe image</p>
    </div>
</div>
<script
      src="https://maps.googleapis.com/maps/api/js?key={{ key }}&callback=initialize&v=weekly"
      async
    >
</script>
<script>
  function startTimer(duration, display) {
            var timer = duration, minutes, seconds;
            var interval = setInterval(function () {

                //figures out how many minutes and seconds there are based on the duration variable
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);
                
                // adds padding
                //minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                //display content
                display.textContent = minutes + ":" + seconds;

                if (--timer < 0) {
                    clearInterval(interval);
                    display.textContent = "Time's up!";
                } else if (timer < 180 && timer >= 60) {
                    display.style.color = "yellow";
                } else if (timer < 60 && timer >= 30) {
                    display.style.color = "red";
                } else if (timer < 30 && timer % 2 == 1) {
                    display.style.color = "red";
                    display.style.backgroundColor = "black";
                } else if (timer < 30 && timer % 2 == 0) {
                    display.style.color = "red";
                    display.style.backgroundColor = "white";
                }
            }, 1000);
        }

        window.onload = function () {
            var fiveMinutes = 35,
                display = document.querySelector('#timerDiv');
            startTimer(fiveMinutes, display);
        };
</script>
</body>

</html>
